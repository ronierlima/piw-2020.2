[{"/home/ronier/www/piw-2020.2/front/src/index.js":"1","/home/ronier/www/piw-2020.2/front/src/App.js":"2","/home/ronier/www/piw-2020.2/front/src/components/Navegador/index.js":"3","/home/ronier/www/piw-2020.2/front/src/components/Postar/index.js":"4","/home/ronier/www/piw-2020.2/front/src/pages/Feed/index.js":"5","/home/ronier/www/piw-2020.2/front/src/components/FormLogin/index.js":"6","/home/ronier/www/piw-2020.2/front/src/components/FormPostar/index.js":"7","/home/ronier/www/piw-2020.2/front/src/components/Post/index.js":"8","/home/ronier/www/piw-2020.2/front/src/services/Services.js":"9","/home/ronier/www/piw-2020.2/front/src/services/api.js":"10","/home/ronier/www/piw-2020.2/front/src/pages/Login/index.js":"11","/home/ronier/www/piw-2020.2/front/src/contexts/auth.js":"12","/home/ronier/www/piw-2020.2/front/src/pages/Cadastro/index.js":"13"},{"size":201,"mtime":1616379192037,"results":"14","hashOfConfig":"15"},{"size":3368,"mtime":1616870069563,"results":"16","hashOfConfig":"15"},{"size":2372,"mtime":1616206280478,"results":"17","hashOfConfig":"15"},{"size":218,"mtime":1616206408876,"results":"18","hashOfConfig":"15"},{"size":576,"mtime":1616207154185,"results":"19","hashOfConfig":"15"},{"size":3263,"mtime":1616112923970,"results":"20","hashOfConfig":"15"},{"size":1189,"mtime":1616373333801,"results":"21","hashOfConfig":"15"},{"size":3995,"mtime":1616867399447,"results":"22","hashOfConfig":"15"},{"size":9990,"mtime":1616867424231,"results":"23","hashOfConfig":"15"},{"size":727,"mtime":1616378047013,"results":"24","hashOfConfig":"15"},{"size":3984,"mtime":1616373821815,"results":"25","hashOfConfig":"15"},{"size":1088,"mtime":1616179916516,"results":"26","hashOfConfig":"15"},{"size":4102,"mtime":1616373229566,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"huunru",{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"30"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"41"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"/home/ronier/www/piw-2020.2/front/src/index.js",[],["58","59"],"/home/ronier/www/piw-2020.2/front/src/App.js",["60"],"/home/ronier/www/piw-2020.2/front/src/components/Navegador/index.js",[],"/home/ronier/www/piw-2020.2/front/src/components/Postar/index.js",[],"/home/ronier/www/piw-2020.2/front/src/pages/Feed/index.js",[],"/home/ronier/www/piw-2020.2/front/src/components/FormLogin/index.js",[],["61","62"],"/home/ronier/www/piw-2020.2/front/src/components/FormPostar/index.js",[],"/home/ronier/www/piw-2020.2/front/src/components/Post/index.js",["63","64"],"import { React, useContext, useEffect, useState } from \"react\";\nimport { ReactComponent as Heart } from \"../../assets/heart.svg\";\n\nimport Identicon from \"react-identicons\";\n\nimport classNames from \"classnames\";\n\nimport \"./style.scss\";\nimport Service from \"../../services/Services\";\nimport { AuthContext } from \"../../App\";\n\nfunction Post({ post, usuario }) {\n  const { user } = useContext(AuthContext);\n\n  const [curtido, setCurtido] = useState(false);\n  const [postUpdate, setPostUpdate] = useState(post);\n  const [postId] = useState(post.id);\n\n  const [verComentarios, setVerComentarios] = useState(false);\n  const [comentarios, setComentarios] = useState([]);\n  const [comentario, setComentario] = useState(\"\");\n\n  const [curtirClasses, setCurtirClasses] = useState(\"card-actions\");\n\n  useEffect(() => {\n    getComentarios();\n    getLikes();\n  }, []);\n\n  useEffect(() => {\n    getPost();\n    getLikes();\n    getComentarios();\n  }, [curtido]);\n\n  function curtir() {\n    Service.posts.like(postId).then(() => {\n      setCurtido(true);\n      setCurtirClasses(classNames(\"card-actions\", \"curtido\"));\n    });\n  }\n\n  function descurtir() {\n    if (curtido) {\n      Service.posts.deslike(postId).then(() => {\n        setCurtido(false);\n        setCurtirClasses(classNames(\"card-actions\", \"descurtido\"));\n      });\n    }\n  }\n\n  function handleCurtir() {\n    curtido ? descurtir() : curtir();\n  }\n\n  function getPost() {\n    Service.posts.getOne(post.id).then((res) => {\n      setPostUpdate(res.data);\n    });\n  }\n\n  function getComentarios() {\n    Service.posts.getComentarios(post.id).then((res) => {\n      setComentarios(res.data);\n    });\n  }\n  function handleComentar(e) {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      e.stopPropagation();\n      comentar();\n    }\n  }\n\n  function comentar() {\n    Service.posts.comentar(post.id, comentario).then((res) => {\n      getComentarios();\n      console.log(res.data);\n      setComentario(\"\");\n    });\n  }\n\n  function getLikes() {\n    Service.posts.getLikes(postId).then((res) => {\n      const arraylikes = [];\n\n      res.data.map((like) => arraylikes.push(like.usuario._id));\n\n      setCurtido(arraylikes.includes(user.id));\n\n      if (curtido)\n        setCurtirClasses(classNames(\"card-actions\", \"initial-curtido\"));\n    });\n  }\n\n  return (\n    <div className=\"card\" key={post.id}>\n      <div className=\"card-header\">\n        <Identicon className=\"card-profile\" string={usuario.email} />\n        <span>{usuario.nome}</span>\n      </div>\n      <div className=\"card-body\">{postUpdate.texto}</div>\n      <div className=\"card-footer\">\n        <span onClick={() => setVerComentarios(!verComentarios)}>\n          {comentarios.length} comentários\n        </span>\n\n        <div className={curtirClasses}>\n          <span className=\"curtidas\">{postUpdate.likes}</span>\n          <Heart\n            onDoubleClick={(e) => {\n              handleCurtir();\n            }}\n            title=\"Click 2x para curtir \"\n            className=\"curtir\"\n          ></Heart>\n        </div>\n      </div>\n\n      {verComentarios && (\n        <div className=\"card-append\">\n          <header className=\"comentar\">\n            <Identicon className=\"card-profile\" string={user.email} />\n            <textarea\n              placeholder=\"Faça seu comentário\"\n              value={comentario}\n              onChange={(e) => {\n                setComentario(e.target.value);\n              }}\n              onKeyPress={handleComentar}\n            ></textarea>\n          </header>\n\n          {comentarios.map((comentario) => (\n            <div className=\"comentario\">\n              <Identicon\n                className=\"profile\"\n                string={comentario.usuario.email}\n              />\n              <div>\n                <span className=\"nome\">{comentario.usuario.nome}</span>\n                <span className=\"texto\">{comentario.texto}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Post;\n","/home/ronier/www/piw-2020.2/front/src/services/Services.js",[],"/home/ronier/www/piw-2020.2/front/src/services/api.js",[],"/home/ronier/www/piw-2020.2/front/src/pages/Login/index.js",[],"/home/ronier/www/piw-2020.2/front/src/contexts/auth.js",["65","66","67","68"],"import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\n\nimport api from \"../services/api\";\n\nexport const AuthContext = createContext();\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(localStorage.getItem(\"@App:user\"));\n  const [token, setToken] = useState(localStorage.getItem(\"@App:token\"));\n\n  useEffect(() => {\n    if (token && user) {\n      api.defaults.headers.Authorization = `${token}`;\n    }\n  }, []);\n\n  async function Login(userData) {\n    const response = await api.post(\"/usuarios/signin\", userData);\n\n    setUser(response.data.token);\n    api.defaults.headers.Authorization = `${response.data.token}`;\n\n    localStorage.setItem(\"@App:user\", JSON.stringify(response.data.user));\n    localStorage.setItem(\"@App:token\", response.data.token);\n  }\n\n  function Logout() {\n    setUser(null);\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{ signed: user ? true : false, user, Login, Logout }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n","/home/ronier/www/piw-2020.2/front/src/pages/Cadastro/index.js",[],{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","severity":1,"message":"74","line":8,"column":3,"nodeType":"75","messageId":"76","endLine":8,"endColumn":13},{"ruleId":"69","replacedBy":"77"},{"ruleId":"71","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":28,"column":6,"nodeType":"81","endLine":28,"endColumn":8,"suggestions":"82"},{"ruleId":"79","severity":1,"message":"83","line":34,"column":6,"nodeType":"81","endLine":34,"endColumn":15,"suggestions":"84"},{"ruleId":"73","severity":1,"message":"85","line":1,"column":25,"nodeType":"75","messageId":"76","endLine":1,"endColumn":35},{"ruleId":"73","severity":1,"message":"74","line":2,"column":10,"nodeType":"75","messageId":"76","endLine":2,"endColumn":20},{"ruleId":"73","severity":1,"message":"86","line":10,"column":17,"nodeType":"75","messageId":"76","endLine":10,"endColumn":25},{"ruleId":"79","severity":1,"message":"87","line":16,"column":6,"nodeType":"81","endLine":16,"endColumn":8,"suggestions":"88"},"no-native-reassign",["89"],"no-negated-in-lhs",["90"],"no-unused-vars","'useHistory' is defined but never used.","Identifier","unusedVar",["89"],["90"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'getComentarios' and 'getLikes'. Either include them or remove the dependency array.","ArrayExpression",["91"],"React Hook useEffect has missing dependencies: 'getComentarios', 'getLikes', and 'getPost'. Either include them or remove the dependency array.",["92"],"'useContext' is defined but never used.","'setToken' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'token' and 'user'. Either include them or remove the dependency array.",["93"],"no-global-assign","no-unsafe-negation",{"desc":"94","fix":"95"},{"desc":"96","fix":"97"},{"desc":"98","fix":"99"},"Update the dependencies array to be: [getComentarios, getLikes]",{"range":"100","text":"101"},"Update the dependencies array to be: [curtido, getComentarios, getLikes, getPost]",{"range":"102","text":"103"},"Update the dependencies array to be: [token, user]",{"range":"104","text":"105"},[850,852],"[getComentarios, getLikes]",[934,943],"[curtido, getComentarios, getLikes, getPost]",[499,501],"[token, user]"]