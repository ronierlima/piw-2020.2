[{"/home/ronier/www/piw-2020.2/front/src/index.js":"1","/home/ronier/www/piw-2020.2/front/src/App.js":"2","/home/ronier/www/piw-2020.2/front/src/components/Navegador/index.js":"3","/home/ronier/www/piw-2020.2/front/src/components/Postar/index.js":"4","/home/ronier/www/piw-2020.2/front/src/pages/Feed/index.js":"5","/home/ronier/www/piw-2020.2/front/src/components/FormLogin/index.js":"6","/home/ronier/www/piw-2020.2/front/src/components/FormPostar/index.js":"7","/home/ronier/www/piw-2020.2/front/src/components/Post/index.js":"8","/home/ronier/www/piw-2020.2/front/src/services/Services.js":"9","/home/ronier/www/piw-2020.2/front/src/services/api.js":"10","/home/ronier/www/piw-2020.2/front/src/pages/Login/index.js":"11","/home/ronier/www/piw-2020.2/front/src/contexts/auth.js":"12","/home/ronier/www/piw-2020.2/front/src/pages/Cadastro/index.js":"13"},{"size":201,"mtime":1616379192037,"results":"14","hashOfConfig":"15"},{"size":3368,"mtime":1616381876143,"results":"16","hashOfConfig":"15"},{"size":2372,"mtime":1616206280478,"results":"17","hashOfConfig":"15"},{"size":218,"mtime":1616206408876,"results":"18","hashOfConfig":"15"},{"size":576,"mtime":1616207154185,"results":"19","hashOfConfig":"15"},{"size":3263,"mtime":1616112923970,"results":"20","hashOfConfig":"15"},{"size":1189,"mtime":1616373333801,"results":"21","hashOfConfig":"15"},{"size":3290,"mtime":1616374198908,"results":"22","hashOfConfig":"15"},{"size":9651,"mtime":1616378112613,"results":"23","hashOfConfig":"15"},{"size":727,"mtime":1616378047013,"results":"24","hashOfConfig":"15"},{"size":3984,"mtime":1616373821815,"results":"25","hashOfConfig":"15"},{"size":1088,"mtime":1616179916516,"results":"26","hashOfConfig":"15"},{"size":4102,"mtime":1616373229566,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"huunru",{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"35"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"42"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},"/home/ronier/www/piw-2020.2/front/src/index.js",[],"/home/ronier/www/piw-2020.2/front/src/App.js",["59"],"import \"./App.css\";\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n  useHistory,\n} from \"react-router-dom\";\n\nimport { createContext, useEffect, useState } from \"react\";\n\nimport Navegador from \"./components/Navegador\";\nimport Postar from \"./components/Postar\";\n\nimport Feed from \"./pages/Feed\";\nimport Login from \"./pages/Login\";\nimport Cadastro from \"./pages/Cadastro\";\n\nimport Make from \"./assets/make.svg\";\nimport NotFound from \"./assets/notfound.svg\";\nimport Server from \"./assets/server-off.svg\";\nimport api from \"./services/api\";\n\nexport const AuthContext = createContext(null);\n\nfunction App() {\n  const [user, setUser] = useState(\n    JSON.parse(localStorage.getItem(\"@App:user\"))\n  );\n\n  const [token, setToken] = useState(localStorage.getItem(\"@App:token\"));\n  const [serverIsOn, setServerIsOn] = useState(false);\n\n  useEffect(() => {\n    api.get(\"\").then(() => {\n      setServerIsOn(true);\n    }).catch((err) => {\n      console.log(err)\n    })\n  }, []);\n\n  if (serverIsOn) {\n    return (\n      <AuthContext.Provider value={{ token, setToken, user, setUser }}>\n        <Router>\n          <Navegador />\n          <Switch>\n            <Route exact path={`${process.env.PUBLIC_URL}/`}>\n              {token === null ? (\n                <Redirect to={`${process.env.PUBLIC_URL}/login`} />\n              ) : (\n                <Redirect to={`${process.env.PUBLIC_URL}/feed`} />\n              )}\n            </Route>\n\n            <Route exact path={`${process.env.PUBLIC_URL}/login`}>\n              {token === null ? (\n                <Login />\n              ) : (\n                <Redirect to={`${process.env.PUBLIC_URL}/feed`} />\n              )}\n            </Route>\n\n            <Route exact path={`${process.env.PUBLIC_URL}/feed`}>\n              {token === null ? (\n                <Redirect to={`${process.env.PUBLIC_URL}/login`} />\n              ) : (\n                <Feed />\n              )}\n            </Route>\n            <Route exact path={`${process.env.PUBLIC_URL}/postar`}>\n              {token === null ? (\n                <Redirect to={`${process.env.PUBLIC_URL}/login`} />\n              ) : (\n                <Postar />\n              )}\n            </Route>\n\n            <Route exact path={`${process.env.PUBLIC_URL}/cadastro`}>\n              {token === null ? (\n                <Cadastro />\n              ) : (\n                <Redirect to={`${process.env.PUBLIC_URL}/feed`} />\n              )}\n            </Route>\n\n            <Route exact path={`${process.env.PUBLIC_URL}/conta`}>\n              <div className=\"container center\">\n              <h1>Página em construção!!!</h1>\n                <img src={Make} alt=\"construct\"></img>\n              </div>\n            </Route>\n\n            <Route path=\"*\">\n              <div className=\"container center\">\n              <h1>Página não encontrada !!!</h1>\n                <img src={NotFound} alt=\"not found\"></img>\n              </div>\n            </Route>\n          </Switch>\n        </Router>\n      </AuthContext.Provider>\n    );\n  } else\n    return (\n      <Router>\n        <Route path={`${process.env.PUBLIC_URL}/`}>\n          <div className=\"container center\">\n            <h1>Nossos servidores estão offline !!!</h1>\n            <img src={Server} alt=\"not found\" width=\"512px\"></img>\n          </div>\n        </Route>\n      </Router>\n    );\n}\n\nexport default App;\n","/home/ronier/www/piw-2020.2/front/src/components/Navegador/index.js",[],["60","61"],"/home/ronier/www/piw-2020.2/front/src/components/Postar/index.js",[],"/home/ronier/www/piw-2020.2/front/src/pages/Feed/index.js",[],"/home/ronier/www/piw-2020.2/front/src/components/FormLogin/index.js",[],["62","63"],"/home/ronier/www/piw-2020.2/front/src/components/FormPostar/index.js",[],"/home/ronier/www/piw-2020.2/front/src/components/Post/index.js",["64","65"],"import { React, useContext, useEffect, useState } from \"react\";\nimport { ReactComponent as Heart } from \"../../assets/heart.svg\";\n\nimport Identicon from \"react-identicons\";\n\nimport classNames from \"classnames\";\n\nimport \"./style.scss\";\nimport Service from \"../../services/Services\";\nimport { AuthContext } from \"../../App\";\n\nfunction Post({ post, usuario }) {\n  const { user } = useContext(AuthContext);\n\n  const [curtido, setCurtido] = useState(false);\n  const [postUpdate, setPostUpdate] = useState(post);\n  const [postId] = useState(post.id);\n\n  const [verComentarios, setVerComentarios] = useState(false);\n  const [comentarios, setComentarios] = useState([]);\n\n  const [curtirClasses, setCurtirClasses] = useState(\"card-actions\");\n\n  useEffect(() => {\n    getComentarios();\n    getLikes();\n  }, []); \n\n  useEffect(() => {\n    getPost();\n    getLikes();\n    getComentarios();\n  }, [curtido]);\n\n  function curtir() {\n    Service.posts.like(postId).then(() => {\n      setCurtido(true);\n      setCurtirClasses(classNames(\"card-actions\", \"curtido\"));\n    });\n  }\n\n  function descurtir() {\n    if (curtido) {\n      setCurtido(false);\n      setCurtirClasses(classNames(\"card-actions\", \"descurtido\"));\n    }\n  }\n\n  function handleCurtir() {\n    curtido ? descurtir() : curtir();\n  }\n\n  function getPost() {\n    Service.posts.getOne(post.id).then((res) => {\n      setPostUpdate(res.data);\n    });\n  }\n\n  function getComentarios() {\n    Service.posts.getComentarios(post.id).then((res) => {\n      setComentarios(res.data);\n    });\n  }\n\n  function getLikes() {\n    Service.posts.getLikes(postId).then((res) => {\n      const arraylikes = [];\n\n      res.data.map((like) => arraylikes.push(like.usuario._id));\n\n\n      setCurtido(arraylikes.includes(user.id));\n\n      if (curtido) setCurtirClasses(classNames(\"card-actions\", \"initial-curtido\"));\n    });\n  }\n\n  return (\n    <div className=\"card\" key={post.id}>\n      <div className=\"card-header\">\n        <Identicon className=\"card-profile\" string={usuario.email} />\n        <span>{usuario.nome}</span>\n      </div>\n      <div className=\"card-body\">{postUpdate.texto}</div>\n      <div className=\"card-footer\">\n        <span onClick={() => setVerComentarios(!verComentarios)}>\n          {comentarios.length} comentários\n        </span>\n\n        <div className={curtirClasses}>\n          <span className=\"curtidas\">{postUpdate.likes}</span>\n          <Heart\n            onDoubleClick={(e) => {\n              handleCurtir();\n            }}\n            title=\"Click 2x para curtir \"\n            className=\"curtir\"\n          ></Heart>\n        </div>\n      </div>\n\n      {verComentarios && (\n        <div className=\"card-append\">\n          <header className=\"comentar\">\n            <Identicon className=\"card-profile\" string={usuario.email} />\n            <textarea placeholder=\"Faça seu comentário\"></textarea>\n          </header>\n\n          {comentarios.map((comentario) => (\n            <div className=\"comentario\">\n              <Identicon className=\"profile\" string={usuario.email} />\n              <div>\n                <span className=\"nome\">{usuario.nome}</span>\n                <span className=\"texto\">{comentario.texto}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Post;\n","/home/ronier/www/piw-2020.2/front/src/services/Services.js",[],"/home/ronier/www/piw-2020.2/front/src/services/api.js",[],"/home/ronier/www/piw-2020.2/front/src/pages/Login/index.js",[],"/home/ronier/www/piw-2020.2/front/src/contexts/auth.js",["66","67","68","69"],"import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\n\nimport api from \"../services/api\";\n\nexport const AuthContext = createContext();\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(localStorage.getItem(\"@App:user\"));\n  const [token, setToken] = useState(localStorage.getItem(\"@App:token\"));\n\n  useEffect(() => {\n    if (token && user) {\n      api.defaults.headers.Authorization = `${token}`;\n    }\n  }, []);\n\n  async function Login(userData) {\n    const response = await api.post(\"/usuarios/signin\", userData);\n\n    setUser(response.data.token);\n    api.defaults.headers.Authorization = `${response.data.token}`;\n\n    localStorage.setItem(\"@App:user\", JSON.stringify(response.data.user));\n    localStorage.setItem(\"@App:token\", response.data.token);\n  }\n\n  function Logout() {\n    setUser(null);\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{ signed: user ? true : false, user, Login, Logout }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n","/home/ronier/www/piw-2020.2/front/src/pages/Cadastro/index.js",[],{"ruleId":"70","severity":1,"message":"71","line":8,"column":3,"nodeType":"72","messageId":"73","endLine":8,"endColumn":13},{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","replacedBy":"77"},{"ruleId":"74","replacedBy":"78"},{"ruleId":"76","replacedBy":"79"},{"ruleId":"80","severity":1,"message":"81","line":27,"column":6,"nodeType":"82","endLine":27,"endColumn":8,"suggestions":"83"},{"ruleId":"80","severity":1,"message":"84","line":33,"column":6,"nodeType":"82","endLine":33,"endColumn":15,"suggestions":"85"},{"ruleId":"70","severity":1,"message":"86","line":1,"column":25,"nodeType":"72","messageId":"73","endLine":1,"endColumn":35},{"ruleId":"70","severity":1,"message":"71","line":2,"column":10,"nodeType":"72","messageId":"73","endLine":2,"endColumn":20},{"ruleId":"70","severity":1,"message":"87","line":10,"column":17,"nodeType":"72","messageId":"73","endLine":10,"endColumn":25},{"ruleId":"80","severity":1,"message":"88","line":16,"column":6,"nodeType":"82","endLine":16,"endColumn":8,"suggestions":"89"},"no-unused-vars","'useHistory' is defined but never used.","Identifier","unusedVar","no-native-reassign",["90"],"no-negated-in-lhs",["91"],["90"],["91"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'getComentarios' and 'getLikes'. Either include them or remove the dependency array.","ArrayExpression",["92"],"React Hook useEffect has missing dependencies: 'getComentarios', 'getLikes', and 'getPost'. Either include them or remove the dependency array.",["93"],"'useContext' is defined but never used.","'setToken' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'token' and 'user'. Either include them or remove the dependency array.",["94"],"no-global-assign","no-unsafe-negation",{"desc":"95","fix":"96"},{"desc":"97","fix":"98"},{"desc":"99","fix":"100"},"Update the dependencies array to be: [getComentarios, getLikes]",{"range":"101","text":"102"},"Update the dependencies array to be: [curtido, getComentarios, getLikes, getPost]",{"range":"103","text":"104"},"Update the dependencies array to be: [token, user]",{"range":"105","text":"106"},[798,800],"[getComentarios, getLikes]",[883,892],"[curtido, getComentarios, getLikes, getPost]",[499,501],"[token, user]"]